# SSR 与 CSR

- SSR（Server Side Rendering）服务端渲染

服务端渲染是一种传统的渲染方式，当浏览器请求页面时、由服务端把 **渲染好的页面** 返回给客户端，客户端直接拿到完整的HTML内容进行解析显示在页面上。

- CSR（Client Side Rendering）客户端渲染

客户端渲染是目前主流的一种渲染方式，典型例子为SPA应用。由服务端返回 **初始的HTML框架**，之后所有的HTML和数据都由 **JS** 进行加载和生成。

---

下图表示同一个页面不同的渲染方式带来的体验效果

![SSR与CSR](/前端/框架/React/CSR-SSR.jpeg)

- 客户端渲染
  
  1. 首先要下载基础的HTML文档解析渲染（此时为白屏）

  2. 解析到JS标签后开始下载JS文件

  3. 浏览器运行JS文件获取页面所需数据、生成剩余DOM元素

  4. 页面就绪、渲染（此时页面正常显示内容）

- 服务端渲染

  1. 下载HTML文档解析渲染（页面显示正常内容）

## 对比

1. 服务端渲染HTML下载时间比客户端渲染相较而言会长一些
  
    - 服务端渲染要下载所有HTML内容，但是由于HTML为文本内容，这点时间差异很小

2. 服务端渲染能更快的显示出页面

    > 由于传输必不可少的需要时间，所以无论 SSR 或 CSR 都会有白屏等待时间

    - 服务端渲染 **下载好HTML内容后** 就可以开始渲染页面，页面就可以开始正常显示了（部分图片等资源文件会正常再次发起请求，此时页面开始显示内容，此时脱离白屏白屏）

    - 客户端渲染会先下载最基础的HTML内容然后渲染，基本HTML框架不包含内容，解析到JS代码时发起请求下载JS文件，下载完毕后执行JS文件，通过JS发起数据请求，等待数据返回。等到数据返回后再进行渲染，渲染后用户能正常看到页面（此时脱离白屏）

3. 拿到的HTML文件内容不同

    > 右键显示网页源代码即可查看（不是在控制台的ELement内查看）

    - 服务端渲染拿到的是整个页面的HTML内容

    - 客户端渲染拿到的是基础的HTML结构
  
---

## **两个主要的问题**

1. **SEO** 问题

搜索引擎爬虫只能解析HTML内容，无法识别JS内容。
    
CSR的数据为通过JS异步请求获取、而SSR数据为服务端直接返回。所以搜索引擎可以SSR的网页内容进行识别分类，进行信息的录入，进行排名。

2. **白屏等待时间问题**

由于服务端渲染获取HTML内容后就可以开始显示网站内容，用户能更早的看到页面，对于用户的体验来说较为友好

客户端渲染需要获取基本HTML框架、下载JS、执行JS、请求数据、渲染页面。导致白屏时间较长，体验感会有所下降。

## 总结

客户端渲染虽然在首屏加载速度、SEO优化上不如服务端渲染，但是在网站用户体验上做的更好，可以做到页面无刷新跳转，而服务端渲染切换页面时会请求新页面，此时会造成浏览器刷新，降低了体验感。

两种渲染方式各有优劣（目前还是以客户端渲染为主流）

需要一种技术将两种方式的优势进行结合，首次加载时使用SSR降低首屏加载速度、后续交互使用CSR提升用户体验。

后文讲解 ReactSSR，完美实现了两种方式的结合。

